
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://github.com/schism-dev/schism-esmf/master/index.html">
      
      <link rel="icon" href="assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-8.5.10">
    
    
      
        <title>SCHISM-ESMF</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.975780f9.min.css">
      
        
        <link rel="stylesheet" href="assets/stylesheets/palette.2505c338.min.css">
        
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL(".",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="None" data-md-color-accent="None">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#schism-esmf" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="index.html" title="SCHISM-ESMF" class="md-header__button md-logo" aria-label="SCHISM-ESMF" data-md-component="logo">
      
  <img src="logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            SCHISM-ESMF
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Home
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  

<nav class="md-nav md-nav--primary md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="index.html" title="SCHISM-ESMF" class="md-nav__button md-logo" aria-label="SCHISM-ESMF" data-md-component="logo">
      
  <img src="logo.png" alt="logo">

    </a>
    SCHISM-ESMF
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Home
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="index.html" class="md-nav__link md-nav__link--active">
        Home
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#three-steps" class="md-nav__link">
    Three steps
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#coupling-frameworks" class="md-nav__link">
    Coupling frameworks
  </a>
  
    <nav class="md-nav" aria-label="Coupling frameworks">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#nuopc" class="md-nav__link">
    NUOPC
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#nuopc-coastalapp" class="md-nav__link">
    NUOPC - CoastalApp
  </a>
  
    <nav class="md-nav" aria-label="NUOPC - CoastalApp">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#obtaining-and-building-coastalapp" class="md-nav__link">
    Obtaining and building CoastalApp
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#esmf" class="md-nav__link">
    ESMF
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#esmf-mossco" class="md-nav__link">
    ESMF - MOSSCO
  </a>
  
    <nav class="md-nav" aria-label="ESMF - MOSSCO">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#obtaining-and-building-mossco" class="md-nav__link">
    Obtaining and building MOSSCO
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-schism-as-part-of-a-mossco-coupled-system" class="md-nav__link">
    Using SCHISM as part of a MOSSCO coupled system
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#esmf-pre-configured-executables" class="md-nav__link">
    ESMF - Pre-configured executables
  </a>
  
    <nav class="md-nav" aria-label="ESMF - Pre-configured executables">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#applications" class="md-nav__link">
    Applications
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#publications" class="md-nav__link">
    Publications
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="installation.html" class="md-nav__link">
        Installation
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="legal.html" class="md-nav__link">
        Legal
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="schism-esmf">SCHISM-ESMF</h1>
<p>The Earth System Modeling Framework (ESMF) and National Unified Operational Prediction Capability (NUOPC) caps for SCHISM.</p>
<h2 id="three-steps">Three steps</h2>
<p>The cap is meant to be used in the context of ESMF-based coupling frameworks, which come in two flavors, either based on ESMF or on its NUOPC extension. We also provide some standalone example applications which you can use to base your own implementation on</p>
<ol>
<li>Install the prerequisites following <a href="installation.html">Installation</a></li>
<li>Build the cap's ESMF and NUOPC libraries following <a href="installation.html">Installation</a></li>
<li>Include the SCHISM-ESMF cap in your application's build system by linking to <code>-libschism_esmf</code>, see below</li>
</ol>
<h2 id="coupling-frameworks">Coupling frameworks</h2>
<h3 id="nuopc">NUOPC</h3>
<p>The National Unified Operational Prediction Capability (NUOPC) is a consortium of Navy, NOAA, and Air Force modelers and their research partners. It aims to advance the weather prediction modeling systems used by meteorologists, mission planners, and decision makers. NUOPC partners are working toward a common model architecture - a standard way of building models - in order to make it easier to collaboratively build modeling systems. To this end, they have developed the NUOPC Layer that defines conventions and a set of generic components for building coupled models using the Earth System Modeling Framework (ESMF).</p>
<p>SCHISM can be such a model component within an NUOPC-coupled system.  A so-called "cap" wraps SCHISM and exposes it via the NUOPC Application Programming Interface (API).  The interfaces exposed through the API are
 * import of fields
 * export of fields
 * control structure</p>
<h3 id="nuopc-coastalapp">NUOPC - CoastalApp</h3>
<p>The NOAA Environmental Modeling System (NEMS) Coastal Application "CoastalApp" is a NUOPC-based coupled system using the NEMS coupler.</p>
<p>The NUOPC cap is currently being integrated as an OCN component of the CoastalApp; this is available from a public repository <a href="https://github.com/noaa-ocs-modeling/CoastalApp">https://github.com/noaa-ocs-modeling/CoastalApp</a></p>
<h4 id="obtaining-and-building-coastalapp">Obtaining and building CoastalApp</h4>
<pre><code>export COASTALAPP_DIR=/my/path/to/coastalapp
git clone https://github.com/noaa-ocs-modeling/CoastalApp $COASTALAPP_DIR
cd $COASTALAPP_DIR
git checkout feature/schism
git submodule update --init --recursive SCHISM NEMS
bash ./build.sh -component &quot;SCHISM&quot;
</code></pre>
<p>You can add components like <code>WW3</code> or <code>ADCIRC</code>, and you may be required to choose a compiler or platform.  Consult <code>./build.sh -h</code> for help and further information.</p>
<h3 id="esmf">ESMF</h3>
<p>The Earth System Modeling Framework (ESMF) is a suite of software tools for developing high-performance, multi-component Earth science modeling applications. Such applications may include a few or dozens of components representing atmospheric, oceanic, terrestrial, or other physical domains, and their constituent processes (dynamical, chemical, biological, etc.). Often these components are developed by different groups independently, and must be “coupled” together using software that transfers and transforms data among the components in order to form functional simulations.</p>
<p>SCHISM can be such a component within an ESMF-coupled system.  A so-called "cap" wraps SCHISM and exposes it via the ESMF Application Programming Interface (API).  The interfaces exposed through the API are
 * import of fields
 * export of fields
 * control structure</p>
<h3 id="esmf-mossco">ESMF - MOSSCO</h3>
<p>MOSSCO, the "Modular System for Shelves and Coasts" is a framework for coupling
processes or domains that are originally developed in standalone numerical models.
The software MOSSCO implements this infrastructure in the form of a library of
components and couplers, and of example coupled applications. The components
"wrap" external models used in coastal and shelf sciences; these wrapped components are then coupled
to each other in the Earth System Modeling Framework (ESMF).</p>
<p>The <a href="esmf.html">SCHISM ESMF</a> cap integrates with MOSSCO.</p>
<h4 id="obtaining-and-building-mossco">Obtaining and building MOSSCO</h4>
<pre><code>export SCHISM_BUILD_DIR=/my/path/to/schism/build
export SCHISM_ESMF_DIR=/my/path/to/schism-esmf
export MOSSCO_DIR=/my/path/to/mossco

git clone https://git.code.sf.net/p/mossco/code $MOSSCO_DIR

cd $MOSSCO_DIR
make all install

bash ./build.sh -component &quot;SCHISM&quot;
</code></pre>
<h4 id="using-schism-as-part-of-a-mossco-coupled-system">Using SCHISM as part of a MOSSCO coupled system</h4>
<p>A simple preconfigured application is available in <code>$MOSSCO_DIR/examples/esmf/schism</code>. To build it, run <code>make</code> in that directory.  You can use the resulting executable as a drop-in replacement for SCHISM's standalone <code>pschism</code> executable, but you need to add the <code>mossco.cfg</code> resource file which overrides <code>param.nml</code> for control parameters of the coupled system, like start and stop time.</p>
<h3 id="esmf-pre-configured-executables">ESMF - Pre-configured executables</h3>
<p>While the API exposed through the SCHISM-ESMF library is the core functionality of the cap, there are also several
 pre-configured simple coupled systems available for you to  <code>make</code> or use as a template:</p>
<pre><code>concurrent_esmf_test.F90
multi_schism.F90
schism_driver_interfaces.F90
schism_pdaf.F90
triple_schism.F90
</code></pre>
<h4 id="applications">Applications</h4>
<p>(1) The SCHISM ESMF cap is used to couple SCHISM to the Parallel Data Assimilation Framework leveraging the control structures of ESMF, see <code>schism_pdaf.F90</code>.</p>
<p>(2) The SCHISM ESMF cap is used in the Modular System for Shelves and Coasts, see  <a href="mossco.html">MOSSCO</a>.  Within that system, SCHISM can be flexibly coupled to components for the atmosphere, waves, ocean BGC, generic input/output, sediment.</p>
<h2 id="publications">Publications</h2>
<p>Hao-Cheng Yu, Yinglong J. Zhang, Nerger Lars, Carsten Lemmen, Jason C.S Yu, Tzu-Yin Chou, Chi-Hao Chu, and Chuen-Teyr Terng: Development of a flexible data assimilation method in a 3D unstructured-grid ocean model under Earth System Modeling Framework, submitted to Geoscientific Model Development, March 2022</p>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
      
        
        <a href="installation.html" class="md-footer__link md-footer__link--next" aria-label="Next: Installation" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Installation
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": ".", "features": ["toc.integrate", "toc.follow", "content.code.annotate"], "search": "assets/javascripts/workers/search.16e2a7d4.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="assets/javascripts/bundle.5a2dcb6a.min.js"></script>
      
    
    
  </body>
</html>